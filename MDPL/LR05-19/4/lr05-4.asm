SSEG	SEGMENT	PARA	STACK
		DB	100	DUP	(0)
SSEG	ENDS

DSEG	SEGMENT
	MATRIX	DB	"01234"
		DB	"56789"
		DB	"98765"
		DB	"43210"
		DB	"01234"
DSEG	ENDS

CSEG	SEGMENT
	ASSUME CS:CSEG, DS:DSEG, SS:SSEG

MAIN:
		MOV	AX,DSEG
		MOV	DS,AX

		MOV	SI,5
		MOV	DI,5
		CALL	MATRIX_PRINT

		MOV	DI,OFFSET MATRIX
		MOV	DX,5
		MOV	CX,DX
		DEC	CX
		LOOP1:
			MOV	SI,DI
			INC	SI

			MOV	BX,DI
			ADD	BX,DX

			ADD	DI,CX
			LOOP2:
				MOV	AL,[SI]
				XCHG	AL,[BX]

				MOV	[SI],AL

				INC	SI
				ADD	BX,DX

				CMP	SI,DI
				JNG	LOOP2
			SUB	DI,CX

			ADD	DI,DX
			INC	DI

			DEC	CX
			JNZ	LOOP1
		
		MOV	SI,5
		MOV	DI,5
		CALL	MATRIX_PRINT

		MOV	AX,4C00H
		INT	21H

MATRIX_PRINT	PROC	NEAR
		MOV	CX,DI
		MOV	BX,0
		MOV	AH,02H

		PRINT_ROW:
			MOV	DL,MATRIX[BX]
			INT	21H
			MOV	DL,' '
			INT	21H

			DEC	DI
			JNZ	SKIP_CRLF

			MOV	DL,13
			INT	21H
			MOV	DL,10
			INT	21H

			MOV	DI,CX		
			DEC	SI
			JZ	PRINT_END

			SKIP_CRLF:
			INC	BX
			JMP	PRINT_ROW

		PRINT_END: 	
			int	21h
		RET
MATRIX_PRINT	ENDP

CSEG	ENDS

END	MAIN
