PUBLIC	READX

EXTRN	X:	WORD
EXTRN	PUTLB:	NEAR

DSEG	SEGMENT	PARA	PUBLIC	'DATA'
	INPUTM	DB	"ENTER NUMBER: ","$"
DSEG	ENDS

CSEG	SEGMENT	PARA	PUBLIC	'CODE'
	ASSUME	CS:CSEG

READX	PROC	NEAR
		MOV	DX, OFFSET INPUTM
		MOV	AH, 09H
		INT	21H

		XOR	BX, BX
		XOR	CX, CX

	INPUT_LOOP:
		MOV	AH, 8
		INT	21H
		
		CMP	AL, 13
		JE	INPUT_END
		
		CMP	AL, '-'
		JE	NEG_NUM
		
		CMP	AL, '0'
		JB	INPUT_LOOP
		CMP	AL, '9'
		JA	INPUT_LOOP
		
		MOV	AH, 2
		MOV	DL, AL
		INT	21H
		
		MOV	CL, AL
		MOV	AX, BX
		
		SHL	AX, 1
		SHL	AX, 1
		ADD	AX, BX
		SHL	AX, 1
		
		MOV	BL, CL
		SUB	BL, '0'
		XOR	BH, BH
		ADD	BX, AX
		
		JMP	INPUT_LOOP
		
	NEG_NUM:
		MOV	AH, 2
		MOV	DL, AL
		INT	21H
		
		MOV	CH, 1
		
		JMP	INPUT_LOOP
		
	INPUT_END:
		CALL	PUTLB
		
		CMP	CH, 1
		JNE	SCAN_END
		
		NEG	BX
		
	SCAN_END:
		MOV	SI, OFFSET X
		MOV	[SI], BX

		RET
READX	ENDP

CSEG	ENDS

END