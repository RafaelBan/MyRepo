PUBLIC	U2NS
PUBLIC	S2NS

EXTRN	X:	WORD
EXTRN	PUTLB:	NEAR

DSEG	SEGMENT	PARA	PUBLIC	'DATA'
	NUM	DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'$'
DSEG	ENDS

CSEG	SEGMENT	PARA	PUBLIC	'CODE'
	ASSUME	CS:CSEG

U2NS	PROC	NEAR
		PUSH	AX
		PUSH	BX
		PUSH	CX
		PUSH	DX
		PUSH	SI

		MOV	BX, X

	USTART:
		MOV	SI, OFFSET NUM
		ADD	SI, 15
		;MOV	CX, 16

	STR_LOOP:
		SHR	BX, 1
		JC	PUT_1

		MOV	AL, '0'
		MOV	[SI], AL
		JMP	SKIP_PUT_1

	PUT_1:
		MOV	AL, '1'
		MOV	[SI], AL

	SKIP_PUT_1:
		DEC	SI

		CMP	SI, OFFSET NUM
		JNB	STR_LOOP

		MOV	SI, OFFSET NUM

	FIND_NBEG:
		MOV	AL, '1'
		CMP	[SI], AL
		JE	PRINT_NUM

		MOV	AL, '$'
		CMP	[SI], AL
		JE	PRINT_ZERO

		INC	SI
		JMP	FIND_NBEG

	PRINT_NUM:
		MOV	DX, SI
		MOV	AH, 09H
		INT	21H
		CALL	PUTLB

	EXIT:
		POP	SI
		POP	DX
		POP	CX
		POP	BX
		POP	AX

		RET

	PRINT_ZERO:
		MOV	DL, '0'
		MOV	AH, 02H
		INT	21H
		CALL	PUTLB	
		
		JMP	EXIT

U2NS	ENDP

S2NS	PROC	NEAR
		PUSH	AX
		PUSH	BX
		PUSH	CX
		PUSH	DX
		PUSH	SI

		MOV	BX, X

		ROL	BX, 1
		ROR	BX, 1
		JNC	USTART

		MOV	DL, '-'
		MOV	AH, 02H
		INT	21H

		NOT	BX
		ADD	BX, 1
		JMP	USTART
S2NS	ENDP

CSEG	ENDS

END