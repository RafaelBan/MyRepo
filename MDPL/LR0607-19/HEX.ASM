PUBLIC	U16NS
PUBLIC	S16NS

EXTRN	X:	WORD
EXTRN	PUTLB:	NEAR

DSEG	SEGMENT	PARA	PUBLIC	'DATA'
        NUM	DB	0,0,0,0,'$'

	TABLE	DB	"0123456789ABCDEF"
DSEG	ENDS

CSEG	SEGMENT	PARA	PUBLIC	'CODE'
	ASSUME	CS:CSEG

U16NS	PROC	NEAR
		PUSH	AX
		PUSH	BX
		PUSH	CX
		PUSH	DX
		PUSH	SI

		MOV	DX, X
		;MOV	DX, 4210H

	USTART:
		MOV	CL, 4
		MOV	SI, 4

	GET_HDIGS:
		MOV	AX, 15
		AND	AX, DX

		DEC	SI
		MOV	BX, OFFSET TABLE

		XLAT

		MOV	BX, OFFSET NUM
		MOV	[BX + SI], AL

		SHR	DX, CL
		JNZ	GET_HDIGS

		MOV	DX, OFFSET NUM
		ADD	DX, SI
		MOV	AH, 09H
		INT	21H
		CALL	PUTLB

		POP	SI
		POP	DX
		POP	CX
		POP	BX
		POP	AX

		RET
U16NS	ENDP

S16NS	PROC	NEAR
		PUSH	AX
		PUSH	BX
		PUSH	CX
		PUSH	DX
		PUSH	SI

		MOV	DX, X

		ROL	DX, 1
		ROR	DX, 1
		JNC	USTART

		MOV	BX, DX
		MOV	DL, '-'
		MOV	AH, 02H
		INT	21H

		NOT	BX
		ADD	BX, 1
		MOV	DX, BX
		JMP	USTART
S16NS	ENDP

CSEG	ENDS

END